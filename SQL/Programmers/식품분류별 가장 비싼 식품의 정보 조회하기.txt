-- https://school.programmers.co.kr/learn/courses/30/lessons/131116
-- 내 풀이: 서브쿼리만 이용
SELECT FC.CATEGORY, FC.MAX_PRICE, FP.PRODUCT_NAME
  FROM (SELECT CATEGORY, MAX(PRICE) AS MAX_PRICE
          FROM FOOD_PRODUCT
         GROUP BY CATEGORY) FC
     , FOOD_PRODUCT FP
 WHERE FP.CATEGORY = FC.CATEGORY
   AND FP.PRICE = FC.MAX_PRICE
   AND FC.CATEGORY IN ('과자', '국', '김치', '식용유')
 ORDER BY FC.MAX_PRICE DESC

-- 다른 풀이: 서브쿼리, RANK 함수 이용
SELECT CATEGORY, PRICE, PRODUCT_NAME
  FROM (SELECT CATEGORY, PRICE, PRODUCT_NAME,
                RANK() OVER(PARTITION BY CATEGORY ORDER BY PRICE DESC) AS RANK
          FROM FOOD_PRODUCT
          WHERE CATEGORY IN ('과자', '국', '김치', '식용유'))
 WHERE RANK = 1
ORDER BY PRICE DESC;